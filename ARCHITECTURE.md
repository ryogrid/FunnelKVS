# Rustの手習い用に開発する分散KVS の設計メモ

- RedisやMemcachedのようなオンメモリでデータを保持するデータストアを実現する
- 分散ハッシュテーブル（Distributed Hash Table, DHT）の技術を用いて、中央サーバ無しで動作するものとする
  - DHTのアルゴリズムとしては一番ポピュラーな "Chord" というアルゴリズムを採用する
- データの他ノードによる中継などによってNAT越え（要は複数の異なるネットワークにノードが存在する場合）することまで考えると、実装がかなり複雑になることが予想されるため、今回は単一ネットワーク内に全ノードがいて、それらのノード間で直接通信が可能であることを前提とする
- 各ノードは構成されたKVSへアクセスするための put, get, delete をREST API として提供する
  - 今回はパフォーマンスに重きを置かないこともあり、ストアできるデータはJSON形式として解釈可能なものに限定する（Valueの部分）
  - Keyの部分はそれほど大きくなることを想定せず、API呼び出し時のURLの部分に含める
  - KVSへのアクセスとは別に、DHTを構成するための通信も、（ひとまずは）REST APIとして定義し、ノード間のやり取りはそれを用いて行うものとする（いちいちソケットプログラミングするのは面倒なので・・）。コネクションを継続的に張り続けておかないと実装が複雑化するといったことが判明した場合は、見直しを行う。
- ストアしたデータはオンメモリで保持するものとし、ストレージへの永続化はひとまず考えない
- ストレージへの永続化はしないが、DHTのアドレス空間上での隣接ノード等を相手方としたデータのレプリケーションは実装する。これにより、全ノードないし
多数のノードを一斉に落とすといったことをしなければ、データは失われないようになる（はず）
- 実装にはRust言語を用い、REST API実装のフレームワーク等や、極めて一般的な処理を担うライブラリを除き、フルスクラッチで実装する
